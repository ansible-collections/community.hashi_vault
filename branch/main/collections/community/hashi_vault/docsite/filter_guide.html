<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Filter guide &mdash; Ansible collections  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/images/Ansible-Mark-RGB_Black.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="User guide" href="user_guide.html" />
    <link rel="prev" title="community.hashi_vault Release Notes" href="CHANGELOG.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->




</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../../../../_static/images/Ansible-Mark-RGB_White.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Ansible Collections Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> Ansible collections
          </a><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <label class="sr-only" for="q">Search docs:</label>
    <input type="text" class="st-default-search-input" id="q" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Collections:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Collection Index</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Collections in the Community Namespace</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Community.Hashi_Vault</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../index.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#communication">Communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#changelog">Changelog</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html#guides">Guides</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#plugin-index">Plugin Index</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugin indexes:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index_filter.html">Index of all Filter Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index_lookup.html">Index of all Lookup Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index_module.html">Index of all Modules</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Ansible collections</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Collection Index</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Collections in the Community Namespace</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Community.Hashi_Vault</a></li>
      <li class="breadcrumb-item active">Filter guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

  
           <div itemprop="articleBody">
             
  <section id="filter-guide">
<span id="ansible-collections-community-hashi-vault-docsite-filter-guide"></span><h1><a class="toc-backref" href="#id1">Filter guide</a><a class="headerlink" href="#filter-guide" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Filter Plugins are now included with other <a class="reference internal" href="../index.html#plugins-in-community-hashi-vault"><span class="std std-ref">plugin documentation</span></a>.</p>
</div>
<div class="contents topic" id="filters">
<p class="topic-title">Filters</p>
<ul class="simple">
<li><p><a class="reference internal" href="#filter-guide" id="id1">Filter guide</a></p>
<ul>
<li><p><a class="reference internal" href="#vault-login-token-filter" id="id2"><code class="docutils literal notranslate"><span class="pre">vault_login_token</span></code> filter</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="vault-login-token-filter">
<span id="ansible-collections-community-hashi-vault-docsite-filter-guide-vault-login-token"></span><h2><a class="toc-backref" href="#id2"><code class="docutils literal notranslate"><span class="pre">vault_login_token</span></code> filter</a><a class="headerlink" href="#vault-login-token-filter" title="Permalink to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">vault_login_token</span></code> filter extracts the token value from the structure returned by a Vault token creation operation, such as those returned by the <code class="docutils literal notranslate"><span class="pre">community.hashi_vault.vault_login</span></code> <a class="reference internal" href="../vault_login_module.html#ansible-collections-community-hashi-vault-vault-login-module"><span class="std std-ref">module</span></a> or <a class="reference internal" href="../vault_login_lookup.html#ansible-collections-community-hashi-vault-vault-login-lookup"><span class="std std-ref">lookup plugin</span></a>, or the <code class="docutils literal notranslate"><span class="pre">community.hashi_vault.vault_token_create</span></code> <a class="reference internal" href="../vault_token_create_module.html#ansible-collections-community-hashi-vault-vault-token-create-module"><span class="std std-ref">module</span></a> or <a class="reference internal" href="../vault_token_create_lookup.html#ansible-collections-community-hashi-vault-vault-token-create-lookup"><span class="std std-ref">lookup plugin</span></a>.</p>
<p>The filter takes an optional parameter <code class="docutils literal notranslate"><span class="pre">optional_field</span></code> with defaults to <code class="docutils literal notranslate"><span class="pre">login</span></code>. If this field exists in the input dictionary, then the value of that field is taken the be the login response, rather than the input dictionary itself.</p>
<p>The purpose of this is primarily to deal with the difference between the output of lookup plugins (which return the login response directly) and modules, which return the login response in a <code class="docutils literal notranslate"><span class="pre">login</span></code> field in its return.</p>
<p>Here is a sample login response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;auth&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;accessor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mQewzgKRx5Yui1h1eMemJlMu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;client_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s.drgLxu6ZtttSVn5Zkoy0huMR&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;entity_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8a74ffd3-f71b-8ebe-7942-610428051ea9&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;lease_duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;testuser&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;orphan&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;policies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;alt-policy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;userpass-policy&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;renewable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;token_policies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;alt-policy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;userpass-policy&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;service&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;lease_duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;lease_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;renewable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;request_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;511e8fba-83f0-4b7e-95ea-770aa19c1957&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;warnings&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;wrap_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The token that we want to extract is in <code class="docutils literal notranslate"><span class="pre">auth.client_token</span></code>.</p>
<p>Here’s an example usage with the <code class="docutils literal notranslate"><span class="pre">vault_login</span></code> module and lookup.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set defaults</span><span class="w"></span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ansible_hashi_vault_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://vault:9801/</span><span class="w"></span>
<span class="w">    </span><span class="nt">ansible_hashi_vault_auth_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">userpass</span><span class="w"></span>
<span class="w">    </span><span class="nt">ansible_hashi_vault_username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span><span class="w"></span>
<span class="w">    </span><span class="nt">ansible_hashi_vault_password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">lookup</span><span class="o">(</span><span class="s1">&#39;env&#39;</span><span class="o">,</span> <span class="s1">&#39;MY_SECRET_PASSWORD&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">community.hashi_vault.vault_login</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_hashi_vault_url</span> <span class="cp">}}</span><span class="s">&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">auth_method</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_hashi_vault_auth_method</span> <span class="cp">}}</span><span class="s">&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_hashi_vault_username</span> <span class="cp">}}</span><span class="s">&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_hashi_vault_password</span> <span class="cp">}}</span><span class="s">&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">block</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Perform a login with a lookup and display the token</span><span class="w"></span>
<span class="w">      </span><span class="nt">vars</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">login_response</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">lookup</span><span class="o">(</span><span class="s1">&#39;community.hashi_vault.vault_login&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">debug</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">token</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="cp">{{</span> <span class="nv">login_response</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.hashi_vault.vault_login_token</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Perform a login with a module</span><span class="w"></span>
<span class="w">      </span><span class="nt">community.hashi_vault.vault_login</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">login_response</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Display the token</span><span class="w"></span>
<span class="w">      </span><span class="nt">debug</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">token</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="cp">{{</span> <span class="nv">login_response</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.hashi_vault.vault_login_token</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Which produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="w">TASK [Perform a login with a lookup and display the token]  ********************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;s.drgLxu6ZtttSVn5Zkoy0huMR&quot;</span>
<span class="p">}</span>

<span class="w">TASK [Perform a login with a module]  *****************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nt">&quot;changed&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nt">&quot;login&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;accessor&quot;</span><span class="p">:</span> <span class="s">&quot;mQewzgKRx5Yui1h1eMemJlMu&quot;</span><span class="p">,</span>
<span class="nt">&quot;client_token&quot;</span><span class="p">:</span> <span class="s">&quot;s.drgLxu6ZtttSVn5Zkoy0huMR&quot;</span><span class="p">,</span> <span class="nt">&quot;entity_id&quot;</span><span class="p">:</span> <span class="s">&quot;8a74ffd3-f71b-8ebe-7942-610428051ea9&quot;</span><span class="p">,</span>
<span class="nt">&quot;lease_duration&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span> <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;testuser&quot;</span><span class="p">},</span> <span class="nt">&quot;orphan&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nt">&quot;policies&quot;</span><span class="p">:</span>
<span class="p">[</span><span class="s">&quot;alt-policy&quot;</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">,</span> <span class="s">&quot;userpass-policy&quot;</span><span class="p">],</span> <span class="nt">&quot;renewable&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nt">&quot;token_policies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;alt-policy&quot;</span><span class="p">,</span>
<span class="s">&quot;default&quot;</span><span class="p">,</span> <span class="s">&quot;userpass-policy&quot;</span><span class="p">],</span> <span class="nt">&quot;token_type&quot;</span><span class="p">:</span> <span class="s">&quot;service&quot;</span><span class="p">},</span> <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nt">&quot;lease_duration&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="nt">&quot;lease_id&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nt">&quot;renewable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nt">&quot;request_id&quot;</span><span class="p">:</span> <span class="s">&quot;511e8fba-83f0-4b7e-95ea-770aa19c1957&quot;</span><span class="p">,</span>
<span class="nt">&quot;warnings&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nt">&quot;wrap_info&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">}}</span>
<span class="w">}</span>

<span class="w">TASK [Display the token]  *****************************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;s.drgLxu6ZtttSVn5Zkoy0huMR&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This filter is the equivalent of reading into the dictionary directly, but it has the advantages of providing semantic meaning and automatically working against the differing output of modules and lookups.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="nt">lookup_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">lookup_login_response</span><span class="o">[</span><span class="s1">&#39;auth&#39;</span><span class="o">][</span><span class="s1">&#39;client_token&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
<span class="nt">module_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">module_login_response</span><span class="o">[</span><span class="s1">&#39;login&#39;</span><span class="o">][</span><span class="s1">&#39;auth&#39;</span><span class="o">][</span><span class="s1">&#39;client_token&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">optional_field</span></code> can be changed in case you’ve put the raw login response in some other structure, but you could also dereference that directly instead.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="nt">my_data</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">something</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">somedata</span><span class="w"></span>
<span class="w">  </span><span class="nt">vault_login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">lookup_login_response</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>

<span class="nt">token_from_param</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">my_data</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.hashi_vault.vault_login_token</span><span class="o">(</span><span class="nv">optional_field</span><span class="o">=</span><span class="s1">&#39;vault_login&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
<span class="nt">token_from_deref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">my_data</span><span class="o">[</span><span class="s1">&#39;vault_login&#39;</span><span class="o">]</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.hashi_vault.vault_login_token</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
<span class="c1"># if the optional field doesn&#39;t exist, the dictionary itself is still checked</span><span class="w"></span>
<span class="nt">unused_optional</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">my_data</span><span class="o">[</span><span class="s1">&#39;vault_login&#39;</span><span class="o">]</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.hashi_vault.vault_login_token</span><span class="o">(</span><span class="nv">optional_field</span><span class="o">=</span><span class="s1">&#39;missing&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="CHANGELOG.html" class="btn btn-neutral float-left" title="community.hashi_vault Release Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user_guide.html" class="btn btn-neutral float-right" title="User guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ansible contributors.</p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->

</body>
</html>