name: Collection Docs (v2)
# concurrency:
#   group: docs-full-${{ github.head_ref }}
#   cancel-in-progress: true
on:
  pull_request_target:
    types: [opened, synchronize, reopened, closed]

env:
  NAMESPACE: community
  COLLECTION_NAME: hashi_vault
  # NOT_A_FORK: ${{ github.repository == 'ansible-collections/community.hashi_vault' }}

jobs:
  build-docs:
    if: github.event.action != 'closed'
    name: Build Ansible Docs
    uses: ansible-collections/community.hashi_vault/.github/workflows/docs-build-pr.yml@docs/build-v2
    with:
      collection: ${{ github.event.repository.name }}
      # collections: ${{ env.NAMESPACE }}.${{ env.COLLECTION_NAME }}
      python: '3.9'

    # runs-on: ubuntu-latest
    # permissions:
    #   contents: read
    # steps:
    #   - name: Set up Python
    #     uses: actions/setup-python@v2
    #     with:
    #       python-version: 3.9

    #   - name: Initialize the build environment
    #     uses: ansible-collections/community.hashi_vault/.github/actions/docs/ansible-docs-build-init@docs/build-v2
    #     with:
    #       collections: ${{ env.NAMESPACE }}.${{ env.COLLECTION_NAME }}
