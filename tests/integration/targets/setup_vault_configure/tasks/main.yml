---
- name: Configuration tasks
  module_defaults: '{{ vault_plugins_module_defaults }}'
  block:
    - name: 'Canary for Vault basic setup'
      vault_ci_read:
        path: '{{ vault_configure_canary.path }}'
      register: canary

    - name: 'Configure Vault basic setup'
      include_tasks: configure.yml
      when: canary.result is none
