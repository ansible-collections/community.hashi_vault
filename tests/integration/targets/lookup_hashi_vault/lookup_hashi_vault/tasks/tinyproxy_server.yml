---
- name: Install tinyproxy
  shell: |
    apt-get update
    DEBIAN_FRONTEND=noninteractive apt-get --assume-yes install tinyproxy
  changed_when: false

- name: Configure tinyproxy
  copy:
    content: |
      Port 8888
      MaxClients 100
      StartServers 10
    dest: /tinyproxy.conf

- name: Start tinyproxy (systemd services does not work in container)
  shell: tinyproxy -c /tinyproxy.conf
  changed_when: false
